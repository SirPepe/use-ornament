(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const y of c.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function e(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=e(a);fetch(a.href,c)}})();var N=Object.defineProperty,_=r=>{throw TypeError(r)},q=(r,t,e)=>t in r?N(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,S=(r,t,e)=>q(r,typeof t!="symbol"?t+"":t,e),g=(r,t,e)=>t.has(r)||_("Cannot "+e),s=(r,t,e)=>(g(r,t,"read from private field"),e?e.call(r):t.get(r)),u=(r,t,e)=>t.has(r)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),l=(r,t,e,i)=>(g(r,t,"write to private field"),t.set(r,e),e),A=(r,t,e)=>(g(r,t,"access private method"),e);function T(r){let t=Math.round(Number(r));return Number.isFinite(t)&&!Number.isNaN(t)?t:0}function k(r){return Math.abs(T(r))}function $(r){return r?String(r).split(/\s+/).map(k).sort((t,e)=>t-e):[]}var p,h,o,n,d,f,v,W=class C extends HTMLElement{constructor(){super(),u(this,f),S(this,"_shadow",this.attachShadow({mode:"open"})),u(this,p,new CSSStyleSheet),u(this,h,this.attachInternals()),u(this,o,[]),u(this,n,0),u(this,d,null),S(this,"_handleClick",i=>{if(i.type==="click"){for(let a of i.composedPath())if(a instanceof HTMLElement){if(a.getAttribute("data-command")==="next"){this.next();return}if(a.getAttribute("data-command")==="prev"){this.prev();return}}}});let t=C._template();this._shadow.append(...t),this._shadow.addEventListener("click",this._handleClick);let e=this._shadow.querySelector("slot:not([name])");if(!e)throw new Error("Template does not contain a default slot");e.addEventListener("slotchange",()=>this._goToCurrent()),this._shadow.adoptedStyleSheets.push(s(this,p))}static _template(){let t=document.createElement("div");return t.innerHTML=`<div part="wrapper">
  <slot></slot>
  <div part="controls-wrapper">
    <slot name="controls">
      <div part="controls">
        <button part="controls-prevBtn" data-command="prev">
          <span>&lt;</span>
        </button>
        <button part="controls-nextBtn" data-command="next">
          <span>&gt;</span>
        </button>
      </div>
    </slot>
  </div>
  <div part="aux-wrapper">
    <slot name="aux"></slot>
  </div>
</div>
<style>
[part="wrapper"] { display: grid; }
:host(:not([controls])) slot[name="controls"] { display: none }
[part="controls"] { position: relative; z-index: 1337; }
</style>`,Array.from(t.children)}static with(t){let e=new this;return e.keyframes=Array.from(Array.from({length:t}).keys()),e}static get observedAttributes(){return["keyframes","current"]}attributeChangedCallback(t,e,i){e!==i&&(t==="keyframes"?(l(this,o,$(i)),A(this,f,v).call(this),this._goToCurrent()):t==="current"&&(l(this,n,this._toKeyframeIdx(i)),this._goToCurrent()))}get controls(){return this.hasAttribute("controls")}set controls(t){t?this.setAttribute("controls","controls"):this.removeAttribute("controls")}get keyframes(){return s(this,o)}set keyframes(t){Array.isArray(t)?(t=Array.from(new Set(t.map(k).sort((e,i)=>e-i))),this.setAttribute("keyframes",t.join(" ")),l(this,o,t)):(this.removeAttribute("keyframes"),l(this,o,[])),A(this,f,v).call(this),this._goToCurrent()}_toKeyframeIdx(t){let e=T(t);return e<0&&(e=Math.abs(e)-1),e>this.maxFrame&&(e=this.maxFrame),s(this,o).indexOf(e)}get current(){return s(this,o)[s(this,n)]||0}set current(t){let e=this._toKeyframeIdx(t);e!==-1?(l(this,n,e),this.setAttribute("current",String(s(this,o)[e]))):(l(this,n,0),this.setAttribute("current","0"))}get nextCurrent(){return s(this,d)&&s(this,o)[s(this,n)]||null}get maxFrame(){return Math.max(...this.keyframes)}_goToCurrent(){let t=s(this,n);t in s(this,o)||(s(this,o).length>=1&&t<0?t=s(this,o).length-1:t=0),l(this,d,t);let e=this.dispatchEvent(new Event("cm-beforeframechange",{bubbles:!0,cancelable:!0}));return l(this,d,null),e?(this._setClassesAndStates(s(this,o)[t]),t!==s(this,n)&&l(this,n,t),this.dispatchEvent(new Event("cm-afterframechange",{bubbles:!0})),!0):!1}_setClassesAndStates(t){for(let i of s(this,h).states)/^frame[0-9]+$/.test(i)&&s(this,h).states.delete(i);s(this,h).states.add(`frame${t}`),s(this,h).states.add("hasNext"),s(this,h).states.add("hasPrev"),t===0&&s(this,h).states.delete("hasPrev"),t===s(this,o).at(-1)&&s(this,h).states.delete("hasNext");let e=this._shadow.querySelector("slot:not([name])")?.assignedElements()[0];if(e){for(let i of e.classList)/^frame[0-9]+$/.test(i)&&e.classList.remove(i);e.classList.add(`frame${t}`)}}next(){let t=s(this,n);return l(this,n,s(this,n)+1),this._goToCurrent()?this.current:(l(this,n,t),t)}prev(){let t=s(this,n);return l(this,n,s(this,n)-1),this._goToCurrent()?this.current:(l(this,n,t),t)}go(t){let e=s(this,n);return l(this,n,this._toKeyframeIdx(t)),this._goToCurrent()?this.current:(l(this,n,e),e)}};p=new WeakMap,h=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,f=new WeakSet,v=function(){let r='slot[name="aux"]::slotted(*){ display: none }';for(let t of s(this,o))r+=`:host(:state(frame${t})) slot[name="aux"]::slotted(.frame${t}) { display: block; }`;s(this,p).replaceSync(r)};var O=W;window.customElements.define("code-movie-runtime",O);const m=document.querySelector("code-movie-runtime"),E=document.querySelector("button.next"),L=document.querySelector("button.prev");function x(){L.disabled=m.current===0,E.disabled=m.current===m.maxFrame}E.addEventListener("click",()=>{m.next(),x()});L.addEventListener("click",()=>{m.prev(),x()});x();for(const r of document.querySelectorAll("table")){const t=document.createElement("div");t.className="tableScroller",r.replaceWith(t),t.append(r)}const M=document.querySelector(".tutorial  "),w=document.createElement("div");w.className="tutorialScroller";M.replaceWith(w);w.append(M);const b={};for(const r of document.querySelectorAll("h2[id], h3[id], h3[id]")){const t=r.getAttribute("id");r.innerHTML+=`<a href="#${t}">#</a>`;const e=/^@[a-zA-Z]+/.exec(r.innerText);if(e){const i=e[0]+"()";b[i]=t}}for(const r of document.querySelectorAll("code:not([class])"))r.closest("h2, h3, h4")||b[r.innerText]&&(r.innerHTML=`<a class="ref" title="Jump to documentation for ${r.innerText}" href="#${b[r.innerText]}">${r.innerText}</a>`);
